<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GetUs.Fit ‚Äì Home</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<nav>
  <a class="brand" href="index.html"><img src="Assets/GetUsTransparent.png" alt="GetUs.Fit" class="brand-logo" /></a>
  <div class="nav-links" id="nav-links">
    <a href="index.html" class="active">Home</a>
    <a href="progression.html">Progression</a>
    <a href="weight.html">Weight</a>
    <a href="calories.html">Calories</a>
  </div>
  <div class="nav-user">
    <a class="nav-username" id="nav-username-display" href="profile.html"></a>
    <button class="btn-nav-logout" onclick="Auth.logout()">Logout</button>
  </div>
  <button class="nav-burger" id="nav-burger" aria-label="Toggle menu" aria-expanded="false">&#9776;</button>
</nav>

<main>
  <div class="hero">
    <h1>Welcome to GetUs.Fit</h1>
    <p>Your personal fitness tracker. Choose a section below to get started.</p>
  </div>

  <div class="features">
    <a class="feature-card" href="progression.html">
      <div class="icon">üìà</div>
      <h3>Progression</h3>
      <p>Log your workouts and track personal bests over time.</p>
    </a>
    <a class="feature-card" href="weight.html">
      <div class="icon">‚öñÔ∏è</div>
      <h3>Weight</h3>
      <p>Record your weight and visualise your progress toward your goal.</p>
    </a>
    <a class="feature-card" href="calories.html">
      <div class="icon">üçé</div>
      <h3>Calories</h3>
      <p>Keep a daily food diary and stay on top of your calorie intake.</p>
    </a>
  </div>

  <div class="card" id="welcome-section">
    <h2 id="welcome-heading" style="color:#cc1a1a;">Welcome! üëã</h2>
    <p id="welcome-body" style="margin-top:10px;color:#888;">Use the sections above to start tracking your fitness.</p>
    <a class="btn btn-primary" href="profile.html" id="profile-btn" style="display:inline-block;margin-top:16px;">Set Up Profile</a>
    <button class="btn btn-danger" id="reset-btn" style="margin-top:16px;display:none;">Reset Account</button>
  </div>
</main>

<script src="app.js"></script>
<script>
  Auth.requireAuth();

  async function loadPage() {
    const profile = await API.get('/profile').catch(() => null);
    const heading = document.getElementById('welcome-heading');
    const body    = document.getElementById('welcome-body');
    const btn     = document.getElementById('profile-btn');
    const resetBtn = document.getElementById('reset-btn');

    if (profile && profile.firstName) {
      heading.textContent = 'Welcome back, ' + profile.firstName + '! üëã';
      body.textContent    = 'Your account is set up and ready to go. Use the navigation above to start tracking.';
      btn.textContent     = 'Edit Profile';
      resetBtn.style.display = '';
    }
  }

  document.getElementById('reset-btn').addEventListener('click', async function () {
    if (confirm('Reset all your fitness data? Your login account will remain active.')) {
      await API.del('/user/data');
      location.reload();
    }
  });

  loadPage();
</script>
</body>
</html>
